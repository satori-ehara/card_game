# アナログカードゲーム「Xeno」をネット上の友人とプレイできるアプリ

こちらのアプリは、有名なアナログボードゲームXenoをネットを介して友人とプレイできるアプリです。

## 作成背景
自分が離れたところにいる友人とこのゲームで遊んでみたいと思ったのが一番の理由です。
戦略性に長けたゲームで、対面するとより面白いとは思いますが、通話をしながらでも十分に楽しめるゲームだと思います。


# アプリケーション使用方法
## 🌐 App URL

### **https://card-game-satorin.herokuapp.com/**  

## ログインアカウント

アカウント１<rb>
Nickname: 対戦者1<rb>
Password: 123qwe

アカウント２<rb>
Nickname: 対戦者2<rb>
Password: 123qwe

よければ上記のアカウントを使ってください。ログイン方法は以下にあります。
数字は半角になっています。


## 手順① 登録、またはログイン

<img width="1440" alt="スクリーンショット 2020-09-14 11 41 37" src="https://user-images.githubusercontent.com/67570383/93038191-4826c000-f67f-11ea-83be-c8f4d5a5fecb.png">

新規登録の場合は、ホーム画面右上にある新規登録ボタンを、
すでにアカウントをお持ちの場合は、ログインボタンを押してください。

移行先で、登録するニックネーム（登録してあるニックネーム）とパスワードを入力していただければ、登録完了となります。

## 手順② 部屋作成

新しい対戦相手とゲームを始める場合、もしくは初めての対戦の場合は、部屋を作成する必要があります。

ホーム画面左上の部屋作成ボタンを押してください。
すると以下の画面に移行します。

<img width="1440" alt="スクリーンショット 2020-09-14 11 52 18" src="https://user-images.githubusercontent.com/67570383/93038734-c59f0000-f680-11ea-95cf-7eeeeca64d76.png">

こちらにて上から、部屋名そして対戦相手を選択してください。
ここでは、部屋を作成した時にログインしていたアカウント vs 選択したアカウント の部屋が作成されます。
部屋を作成した人が必ず先攻になるので、注意してください。

※対戦者1でログインされている場合は対戦者2を対戦相手として選択してください。

## 手順③ ゲーム開始

作成した部屋をクリックして以下のようなゲーム部屋へ移行してください。

<img width="1438" alt="スクリーンショット 2020-09-14 11 43 22" src="https://user-images.githubusercontent.com/67570383/93038579-59bc9780-f680-11ea-8b1f-65419c2a3cfa.png">

対戦をする二人が揃ったら、左上にあります対戦開始ボタンを押してください。
ゲームが進行します。
ターンのプレイヤーは出すカードをクリックして選択してください。

ゲームの詳しいルールに関しては以下にまとめてあります。（アナログボードゲームの"Xeno"のルールとほぼ同じです。）

# ゲームのルール

１〜８のカードが2枚、９と１０が1枚ずつの合計18枚のカードを使った、ターン制のゲームです。
初期はお互い手札1枚からスタートし、山札の一番下のカードを一旦ゲームから除外します。（この時点で山札は１５枚となります。）
自分のターンになったら、山札からカードを1枚引き、場にカードを1枚出します。
つまり、ターンをチェンジする際には、お互いの手札は必ず1枚という状況になります。

ゲームの勝敗を決するには2つのパターンがあります。

※分かりにくければルールは本家様の動画をご覧ください。（多少違ったルールになっている部分はございますので、それらはこのREADMEをご覧ください。）

本家様解説URL：https://www.youtube.com/watch?v=NFTbNrya38g

4人用の解説になっていますが大まかなルールは変わらず、1vs1でやる形になります。

### パターン１ デッキが切れた場合

デッキが切れた場合、すなわちターンが回ってきたにも関わらず、山札からカードが引けない場合。
その時点でお互い手札を開示し、数字の大きい人が勝利します。

### パターン2 カードの効果による勝利

カードにはそれぞれ全てに固有の能力が付与されており、その能力によって勝敗が決する場合があります。
それぞれの能力については以下に記載します。

## カードの能力について

カードにはそれぞれ固有の能力があります。

### 1
最初の1枚目は何も起きません。
2枚目が出された時、相手は山札からカードを1枚引き手札をオープンにします。
その後、相手の手札から1枚を選び捨てさせます。
開示された相手の手札から１枚を選んで捨てさせる事ができます。

### 2

出した時に、相手の手札の数字を予想します。
合っていた場合は自分の勝利となります。
間違っていた場合は試合続行となります。
出した時に出るタブから予想するカードを選択してください。
予想された側の人は相手が何と予想してきたかを知る事ができます。

### 3

相手の手札を見る事ができます。
相手の手札が普段は0になっていますが、見えるようになります。
確認できたら、出現した確認ボタンをクリックしてください。

### 4

次の相手のターンのみ、自身に降りかかるカードの効果を無効化する事ができます。
次の相手のターンで発動された、自分に対する効果（具体的には1,2,3,5,6,8,9）のカードの能力を無効化します。

### 5

出した時に、相手は山札からカードを1枚引きます。
裏向きのままカードを選択し、選択したカードを捨てさせます。
裏（0）のまま、相手の手札を１枚選択してください。そのカードを捨てさせます。
右と左は相手の手札の右と左をリンクしているので、相手との駆け引きも楽しめます。

### 6

このカードを出した時、自身の手札と相手の手札で勝負をします。
数の大きかった方がゲームの勝者となります。
引き分けの場合は続行します。

### 7

次の自分のターンの初めに、山札の上から3枚を見る事ができます。
そのうち1枚を選び、手札に加える事ができます。
残ったカードは山札へ戻し、シャッフルします。
次の自分のターンの初めに、カードが３枚表示されます。それは山札の上から３枚のカードです。
その中から１枚を選択し、手札に加える事ができます。残りのカードは山札に戻しシャッフルされます。

### 8

このカードを出した時、自身の手札と相手の手札を入れ替えます。

### 9

このカードを出した時、相手は山札からカードを1枚引きます。
その後、手札を公開し、そのうちから1枚を選び捨てさせます。
相手のカードが開示されるので、どちらか１枚を選び捨てさせる事ができます。

### 10

このカードは場に出す事ができません。
このカードが９以外で捨てられた場合、手札を全て捨て、転生札を持った状態でゲームに復帰します。
この効果は２で当てられた場合も復帰する事ができます。
ただし、９で捨てさせられた場合は自身の負けとなります。
転生札とは、ゲームの最初に除外したカードです。



# データベース設計

## usersテーブル
|Column|Type|Options|
|------|----|-------|
|nickname|string|null: false|
|password|string|null: false|
### Association
- has_many :kou
- has_many :otu

## gamesテーブル
|Column|Type|Options|
|------|----|-------|
|condition|string|null: false|
|deck|text|null: false|
|field_card|string|null: false|
|turn|string|null: false|
|turn_count|integer|null: false|
|action|string|null: false|
### Association
- belongs_to :group
- belongs_to :kou
- belongs_to :otu

## kousテーブル
|Column|Type|Options|
|------|----|-------|
|user_id|integer|null: false, foreign_key: true|
|game_id|integer|null: false, foreign_key: true|
|hand|integer|null: false|
### Association
- belongs_to :user
- belongs_to :game

## otusテーブル
|Column|Type|Options|
|------|----|-------|
|user_id|integer|null: false, foreign_key: true|
|game_id|integer|null: false, foreign_key: true|
|hand|integer|null: false|
### Association
- belongs_to :user
- belongs_to :game

## groupsテーブル
|Column|Type|Options|
|------|----|-------|
|kou_id|integer|null: false, foreign_key: true|
|otu_id|integer|null: false, foreign_key: true|
|name|string|null: false|
### Association
- belongs_to :game
